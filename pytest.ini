[pytest]
# ========================================================================
# Configuración general de Django para pytest
# ========================================================================
DJANGO_SETTINGS_MODULE = config.settings.dev  # Settings que se usarán al correr los tests

# ========================================================================
# Reconocimiento de archivos, clases y funciones de prueba
# ========================================================================
python_files = tests.py test_*.py *_tests.py  # Archivos que pytest considerará como tests
python_classes = Test*                          # Clases que comienzan con Test
python_functions = test_*                       # Funciones que comienzan con test_

# ========================================================================
# Opciones adicionales al ejecutar pytest
# ========================================================================
addopts = 
    --verbose                # Mostrar info detallada de cada test
    --strict-markers         # Marca los tests que no estén declarados
    --tb=short               # Traza de errores corta
    --cov=apps               # Cobertura de código en la carpeta apps
    --cov-report=html        # Generar reporte HTML de cobertura
    --cov-report=term-missing # Mostrar en consola líneas sin cubrir
    --cov-fail-under=50      # Fallar si cobertura < 50%

# ========================================================================
# Directorios donde buscar tests
# ========================================================================
testpaths = 
    apps

# ========================================================================
# Marcadores personalizados
# ========================================================================
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')  # Tests lentos
    integration: marks tests as integration tests               # Tests de integración
    unit: marks tests as unit tests                             # Tests unitarios
